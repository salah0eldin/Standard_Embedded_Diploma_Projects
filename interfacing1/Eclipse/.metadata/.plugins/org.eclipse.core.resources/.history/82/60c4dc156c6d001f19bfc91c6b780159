/*
 * application.c
 *
 *  Created on: Sep 8, 2024
 *      Author: Salah-Eldin
 */

#include "application.h"

extern time_t time;

void leds_init(void) {
	DDRD |= _BV(4) | _BV(5);
	PORTD &= ~_BV(4) & ~_BV(5);
}

void buzzer_init(void) {
	DDRD |= _BV(0);
	PORTD &= ~_BV(0);
}

void seven_segment_pins_init(void) {
	DDRC |= 0x0F;
	PORTC &= 0xF0;

	DDRA |= 0b00111111;
	PORTA &= 0b11000000;
}

void adjust_time_buttons_init(void) {
	DDRB &= 0b10000100;
	PORTB |= 0b01111011;
}

void count_mode_button_init(void) {
	DDRB &= ~_BV(7);
	PORTB |= _BV(7);
}

void reset_button_int0_init(void) {
	DDRD &= ~_BV(2);
	PORTD |= _BV(2);

	GICR |= _BV(INT0);
	MCUCR |= _BV(ISC01);

}

void pause_button_int1_init(void) {
	DDRD &= ~_BV(3);
	PORTD |= _BV(3);

	GICR |= _BV(INT1);
	MCUCR |= _BV(ISC11) | _BV(ISC10);
}

void resume_button_int2_init(void) {
	DDRB &= ~_BV(2);
	PORTB |= _BV(2);

	GICR |= _BV(INT2);
}

void timer1_init(void) {
	TCCR1B |= _BV(WGM12) | _BV(CS10) | _BV(CS12);
	TCNT1 = 0;
	OCR1A = 15625;

	TIMSK |= _BV(OCIE1A);
}
